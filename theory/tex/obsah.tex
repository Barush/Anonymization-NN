\chapter{Úvod}

\chapter{Anonymizace obrazových dat}

	Anonymizace dat je v dne¹ní dobì velmi aktuálním tématem. Velmi intenzivnì se na ní pracuje jak na úrovni datové, tak na úrovni anonymizace obrazových dat, která je také pøedmìtem této práce. Pokud je spoleènost schopna zajistit kvalitní anonymizaci dat, která spravuje, nejen, ¾e tím plní svoje zákonné povinnosti, mù¾e si tím také vylep¹it svoje jméno v oèích zákazníkù a spoleèností, se kterými spolupracuje. 

	Tato kapitola se blí¾e zabývá legislativním podtextem ochrany osobních údajù v sekci , dále potom v sekci / popisem pojmu anonymizace dat a v sekci / jsou popsány
	metody, které se k anonymizaci dat pou¾ívají v souèastnosti. 

	\section{Osobní údaje a jejich ochrana}\label{osobni_udaje}

		Ochrana osobních údajù v Èeské republice pøedstavuje soubor práv a povinností, které se vztahují k uchovávání a zacházení s daty pøímo se týkajícími dané fyzické
		osoby. Osobní údaje nemusí být v¾dy pøímo identifikující danou osobu (jako je napøíklad rodné èíslo, jméno a pøíjmenní, adresa trvalého bydli¹tì apod.). Za 
		osobní údaje jsou pova¾ovány jakékoliv údaje pøímo související se ¾ivotem konkrétní nebo urèitelné osoby. Mù¾e jít napøíklad o provozování koníèkù, èlenství v 
		politických stranách, úèast na specifických událostech, náv¹tìvy rùzných míst, velikost obleèení a podobnì. Ochrana osobních údajù (ochrana osobních dat) je v 
		Èeské republice regulována zákonem è. 101/2001 Sb., o ochranì osobních údajù a o zmìnì nìkterých zákonù a  dal¹ími právními pøedpisy.

		Zákon rozli¹uje osoby, které zpracovávají osobní údaje (správce osobních údajù) a osoby, jejich¾ data správci zpracovávají (subjekt osobních údajù). Správcùm jsou
		zákonem ukládány pøedev¹ím povinnosti, zatímco subjektùm údajù jsou dána práva. Dodr¾ování práv a povinností obou stran je v Èeské republice kontrolováno 
		prostøednictvím Úøadu na ochranu osobních údajù.

		Základní ideou ochrany osobních údajù je ta, ¾e osobní údaje jsou shroma¾dovány a zpracovávány za nìjakým úèelem. Ka¾dý úèel vy¾aduje jiný typ osobních údajù a také
		jiné mno¾ství takto zpracovávaných osobních údajù. Ve vý¹e uvedeném zákonì byly pro bli¾¹í specifikaci tìchto úèelù zavedeny pojmy úèel zpracování, prostøedky 
		zpracování, zpùsob zpracování, kategorie osobních údajù, kategorie subjektù údajù a kategorie pøíjemcù. V tìchto termínech je tøeba zpracovávání osobních údajù popsat.
		[citace ze zakona, pod carou: vyklad zhttp://www.oou.cz/]

		V této práci se budu vìnovat zpracovávání obrazového materiálu nasbíraného na veøejném prostranství. Vzhledem k tomu, ¾e veøejné prostranství je v¾dy snímáno za 
		bì¾ného dne, spolu s terénem, který je snímán, jsou nasnímáni i lidé a dal¹í objekty, které se v daném prostranství pohybují. Jak bylo øeèeno døíve v této kapitole,
		ve¹keré informace, které mohou prozradit jakékoliv údaje pøímo související s ¾ivotem dané osoby jsou pova¾ovány za osobní údaje. Z toho vyplývá, ¾e i obrazový 
		materiál nasnímaný na veøejném místì obsahující cizí osoby nebo automobily obsahuje osobní údaje a je tøeba se vìnovat zpùsobu jejich zpracování.

		V dne¹ní digitální dobì máme k dispozici velké mno¾ství obrazových dat. V této práci se budu vìnovat datùm zachytávaným pro úèely vizualizace prostoru z mapy 
		nasbírané v rámci slu¾by Panorama spoleènosti Seznam.cz. Tato data jsou sbírána prostøednictvím speciálnì upravené panoramatické kamery, která je umístìna na 
		støe¹e vozidla. Toto vozidlo pøi prùjezdu zpracovávanou lokalitou snímá svoje okolí a poøízený obrazový materiál se poté zpøístupòuje ¹iroké veøejnosti. Publikování 
		obrazového materiálu, na kterém se vyskytují osobní údaje jako jsou SPZ vozidel, oblièeje kolemjdoucích a podobnì je velmi citlivou zále¾itostí. Aby bylo 
		minimalizováno riziko zneu¾ití tìchto údajù, byla zvolena mo¾nost anonymizace.

	\section{Anonymizace}

		Anonymizovaná data jsou taková data, která nemohou vést pøímo k identifikaci konkrétního èlovìka. Pokud jsou data obsahující osobní údaje anonymizována, pøestávají podléhat 
		pøísným regulacím Zákona o ochranì osobních údajù a lze s nimi nakládat volnìji. 

		Hranici, kdy jsou data u¾ anonymizována nelze zcela jednoznaènì definovat a anonymizaci je 
		tøeba pro ka¾dou specifickou skupinu dat posuzovat individuálnì. Pouhé zaèernìní jména v dokumentech malé firmy napøíklad nemusí vést k tomu, ¾e konkrétní osoba nebude dle dal¹ích vodítek v dokumentech identifikovatelná. Pøíklad toho, ¾e stejná úroveò anonymizace nemusí mít v¾dy stejné výsledky mlze sledovat porovnáním obrázkù \ref{spz_anonym} a \ref{oblicej_anonym}. Oba obrázky jsou zpracovány stejným rozostøovacím filtrem. U SPZ na obrázku \ref{spz_anonym} by bylo dekódování pùvodní poznávací znaèky automobilu

		\begin{figure}
						\centering
						\includegraphics[width=130mm]{fig/anonym_car.pdf}
						\caption{Anonymizovaná SPZ vozidla.}
						\label{spz_anonym}
		\end{figure}

		\begin{figure}
						\centering
						\includegraphics[width=130mm]{fig/anonym_face.pdf}
						\caption{Anonymizovaný oblièej.}
						\label{oblicej_anonym}
		\end{figure}

	\section{Metody vyu¾ívané v souèasnosti}

		Datová anonymizace dosáhla v souèasné dobì uspkojivé úrovnì. Úspì¹nì anonymizována jsou jak data v pdf dokumentech, tak v databázích. Datovou anonymizaci lze v dne¹ní
		dobì provádìt plnì automaticky prostøednictvím mnoha nástrojù jak komerèních, tak volnì dostpuných.

		Anonymizace v obrazových datech zatím nedosáhla tak vysoké úrovnì a to hned z nìkolika dùvodù:
		1. Anonymizace v obrazových datech je velmi aplikaènì specifická - není proto tak velký tlak na její vývoj
		2. Anonymizace obrazových dat je výpoèetnì nároènìj¹í ne¾ anonymizace na úrovni datové
		3. 

		Anonymizace obrazových dat sestává ze dvou èástí: detekce èásti obrázku urèené k anonymizaci a vlastní proces anonymizace. Je zøejmé, ¾e vlastní proces anonymizace
		u¾ není výpoèetnì nijak nároèný proces. Jedná se zpravidla o aplikaci rozostøení, pøípadnì o pøidání vrstvy, která plnì pøekrývá anonymizované èásti obrázku. 
		Problematická v¹ak je detekce èásti obrázku urèené k anonymizaci. 

		\subsection{Manuální anonymizace}

			Po dlouhou dobu byla anonymizace obrazových dat potøeba vìt¹inou na malém objemu dat (napøíklad ve zpravodajství a podobnì). V takovém pøípadì je naprosto dostaèující
			provádìt výbìr èásti obrázku, která je urèena k anonymizaci manuálnì. 

			Kvalita takto anonymizovaného obrázku je velmi dobrá, proto¾e èlovìk pøímo vidí výsledek a doká¾e
			korigovat rozsah provedené úpravy tak, aby výsledný obrázek byl skuteènì anonymní. Na svoje limity tato metoda v¹ak nará¾í pøi nárùstu mno¾ství anonymizovaných dat.

			Pro pøedstavu pøi zpracovávání dat pro slu¾bu Panorama vzniknou ka¾dý snímací den 4TB obrazového materiálu z ka¾dého snímajícího vozidla. Takové mno¾ství dat u¾ není
			v rozumném èase mo¾né zpracovávat manuálnì a tak je tøeba vytvoøit automatizovanou variantu. 

		\subsection{Automatizovaná anonymizace}

			Automatizovaná anonymizace obrazových dat je zatím na poèátku svého vývoje. 

			Eyedea anonymization - to se pou¾ívá v Seznamu. TODO: zjistit jak to funguje a jaké jsou alternativy.

			Zásadním problémem automatizované anonymizace, hlavnì pøi anonymizaci SPZ vozidel, jsou chyby vzniklé pøi detekci SPZ. Ty jsou toti¾ èasto detekovány i na místech, na kterých se 
			sice na fotografii vyskytuje text, nikoliv v¹ak SPZ. Pøi pou¾ití anonymizovaných dat pro slu¾bu Panorama je tento druh chyb nepøijatelný. Jde toti¾ o omezení jednoho
			z dùle¾itých úèelù slu¾by Panorama. U¾ivatelùm slou¾í hlavnì pro lep¹í orientaci v terénu, který neznají. Pokud chce u¾ivatel slu¾bu vyu¾ít k rychlej¹ímu nalezení
			nìjaké prodejny, je naprosto ne¾ádoucí, aby v rámci automatické anonymizace SPZ vozidel byly anonymizovány i napø. nápisy nad vstupy do obchodù a provozoven. V aktuálním
			stavu automatizované anonymizace je právì tato závada velmi èastá. V této práci bude ukázáno, jakým zpùsobem se tìmto chybám vyvarovat.

\chapter{Neuronové sítì}

	Neuronové sítì jsou jednou ze tøí hlavních podskupin vìdního oboru soft computing. Dal¹ími problematikami, které tato vìdní disciplína zkoumá jsou fuzzy systémy a evoluèní algoritmy. Tato práce se vìnuje hlubokým neuronovým sítím pracujícím nad obrázkovými daty. Neuronové sítì jsou uvedeny do ¹ir¹ího kontextu v této kapitole.

	\section{Biologický základ neuronových sítí}

		Pøi studiích v oborech biologie a biofyziky bylo bìhem posledních nìkolika dekád odhaleno mnoho principù, díky kterým se mù¾eme pøiblí¾it pochopení funkce na¹í nervové soustavy a mozku. Základní stavební jednotkou lidského tìla je buòka, základní stavební jednotkou nervové soustavy potom je \emph{neuron}. Hlavní souèásti neuronu jsou \emph{dendrity}, \emph{axony} a \emph{tìlo buòky (soma)}, jak je znázornìno na obrázku \ref{neuron}. Tìchto neuronù se v lidské nervové soustavì nachází cca $10^{11}$.

		\begin{description}
			\item[Dendrit] -- Vstupní bod neuronu. Pøes dendrity se do tìla neuronu dostávají elektricko-chemické vzruchy, jejich¾ pøenos je hlavní èinností neuronu.
			\item[Axon] -- Èást neuronu, která zaji¹»uje pøenos vzruchù. Je ukonèena \emph{axonálním zakonèením}, které je výstupním bodem neuronu a nachází se velmi blízko dendritu jiného neuronu.
			\item[Synapse] -- Spojení mezi dvìma neurony - pøesnìji mezi dendritem a axonálním zakonèením. V dne¹ní dobì není aktivita mozku mìøena v poètu neuronù, nýbr¾ právì v poètu synapsí.
			\item[Neurotransmiter] -- chemická látka, která zaji¹»uje pøenos informací v mozku. V této práci budu mluvit o pøenosu elektricko-chemického vzruchu v synapsi, ale neurotransmitery mají v nervové soustavì mnohem ¹ir¹í funkci.
			\item[Soma] -- tìlo buòky. Sleduje, zda-li suma potenciálù pøicházejících z jednotlivých dendritù nepøesáhla dný práh a pokud se tak stane, vygeneruje nový vzruch.
		\end{description}

		\begin{figure}
						\centering
						\includegraphics[width=90mm]{fig/neuron.pdf}
						\caption{Schéma biologického neuronu. Na obrázku je zobrazeno \emph{jádro}, které uchovává genetickou informaci buòky, \emph{soma} je tìlo buòky, \emph{dendrity} jsou vstupní body neuronu, \emph{axon} jsou výstupní výbì¾ky tvoøená axonovými vlákny a \emph{axonální zakonèení} jsou výstupní místa neuronu.}
						\label{neuron}
		\end{figure} 

		V okam¾iku, kdy se v tìle neuronu nashromá¾dí dostateènì velký potenciál, zaène se ¹íøit nervovým vláknem (axonem) a¾ k axonálnímu zakonèení. Tady pøejde do dal¹ího neuronu. Velikost signálu pøená¹ená z dendritu do tìla neuronu závisí na síle impulzu sousedního neuronu, kterého se dendrit dotýká a také na \emph{synaptické váze}. V tìle neuronu se seètou hodnoty signálù od v¹ech aktivních dendritù. Pokud souèet hodnot pøekroèí jistý práh, soma vygeneruje nový impulz a tím se vzruch ¹íøí do dal¹ích neuronù. Bezprostøednì po vytvoøení pulzu se neuron stane na chvilku necitlivým. To má za následek generování nespojitého signálu, jeho¾ frekvence se mù¾e pohybovat v rozmezí 0,1-100Hz.

	\section{Umìlý neuron}
		Princip biologického neuronu je napodobován umìlým neuronem. Nejzákladnìj¹í model umìlého neuronu je zobrazen na obrázku \ref{art_neuron}, kde

		\begin{description}
			\item[\textbf{$x_i$}] je vstupní hodnota, která mù¾e být napojena na primární vstup nebo na výstup jiného neuronu. 
			\item[$w_i$] je váha propojení. Urèuje jak moc bude konkrétní vstup $i$ ovlivòovat výstup neuronu. Váhy se v prùbìhu výpoètu mìní, pøípadnì pøes nemìnnou váhu mù¾e být pøipojen tzv. \emph{bias}.
			\item[$u$] je hodnota vnitøního potenciálu, která je závislá na zvolené bázové funkci. Nejèastìji vyu¾ívané jsou dvì:
			\begin{itemize}
				\item \textbf{Lineární}, pro kterou platí 
				\begin{equation}
					u = \sum_{i = 1}^{n} x_i * w_i
				\end{equation}
				\item \textbf{Radiální}, pro kterou platí 
				\begin{equation}
					u = \sqrt{\sum_{i = 1}^{n}(x_i - w_i)^2}
				\end{equation}
			\end{itemize}
		\end{description}
		 Ka¾dý vstup $i$ má svoji váhu $w_i$, kterou je hodnota $x_i$ vynásobena. Vnitøní potenciál neuronu $u$ je potom vypoèten podle následujícího vztahu:
		}

		\begin{equation}
			u = f(\overrightarrow{x})\sum_{i=1}^{n}x_i*w_i
		\end{equation}

		Výstupní funkce je potom vypoètena podle následujícího vztahu:

		\begin{equation}
			y = g(u) = g(f(\overrightarrow{x}))
		\end{equation}

		Kde $f()$ se nazývá \emph{bázovou funkcí} a $g()$ se nazývá \emph{aktivaèní funkcí} neuronu.

		\subsection{Bázová funkce}
			Bázovou funkcí se oznaèuje vnitøní funkce neuronu, podle které je vypoèítávána hodnota vnitøního potenciálu neuronu $u$. 

		\begin{figure}
						\centering
						\includegraphics[width=100mm]{fig/art_neuron.pdf}
						\caption{Obecné schéma umìlého neuronu, kde \overrightarrow{x} = ($x_1, x_2, ... x_n$) je vstupní vektor, \emph{u} je vnitøní potenciál a \emph{y} je výstupní hodnota.}
						\label{art_neuron}
		\end{figure}

		\subsection{Perceptron}

		\subsection{Aktivaèní funkce}

		\section{Topologie sítí}
		\begin{figure}
						\centering
						\includegraphics[width=130mm]{fig/vrstvova.pdf}
						\caption{Vrstvová sí». Výstup ka¾dého neuronu lze pou¾ít v aktuální nebo v ka¾dé dal¹í vrstvì. Neobsahuje zpìtné vazby.}
						\label{vrstvova_net}
		\end{figure}
		\begin{figure}
						\centering
						\includegraphics[width=130mm]{fig/acyklicka.pdf}
						\caption{Acyklická sí». Výstup ka¾dého neuronu lze pou¾ít v nìkteré z následujících vrstev.}
						\label{acyklicka_net}
		\end{figure}
		\begin{figure}
						\centering
						\includegraphics[width=130mm]{fig/dopredna.pdf}
						\caption{Dopøedná sí». Výstup neuronu lze pou¾ít v¾dy jen v následující vrstvì.}
						\label{dopredna_net}
		\end{figure}

	\section{Uèení}

	\section{Hluboké neuronové sítì}

\chapter{Návrh}

	V této kapitole je popsán návrh implementovaného programu. Struktura programu byla rozèlenìna do tøí fází, u kterých byla zpracovávána rozdílná data a byly vyu¾ity rùzné technologie zpracování.
	První fáze, výbìr u¾ natrénované neuronové sítì je popsán v èásti \ref{ilsvrc_net}, dále je potom v èásti \ref{finetunning} popsána následující práce s nauèenou neuronovou sítí - finetunning a pøístup k pøedposlední vrstvì. Pomocí této novì upravené neuronové sítì bude pro ka¾dý obrázek rozhodnuto, zda se na nìm nachází automobil èi nikoliv. V èásti \ref{detection} je potom popsána metoda, která byla zvolena k detekci SPZ v obrázku, o kterém u¾ víme, ¾e se na nìm nachází automobil. 

	\section{Pou¾itá neuronová sí»}\label{ilsvrc_net}
		ILSVRC network, jak vypadá, jak funguje, co dìlá

		\subsection{Na èem je natrénovaná}
			ImageNet data - popis celé ImageNet mno¾iny obrázkù (více ne¾ 10M obrázkù roztøídìných do 1000 tøíd)
			ILSVRC12 - popis ilsvrc soutì¾e, statistika modelu, umístìní v jednotlivých kategoriích

	\section{Finetunning}\label{finetunning}
		Jak byl proveden finetunning
		\subsection{Zvolená metoda}
			To se je¹tì uvidí jaká

	\section{Detekce SPZ v obrázku s autem}\label{detection}
		Je¹tì se uvidí, jak to dìlat, zatím to vypadá na jedno z 
		\begin{itemize}
			\item Detektor hran
			\item Neuronka
			\item Nìco vy¹¹ího
		\end{itemize}



